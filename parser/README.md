# Parser - –ü–∞—Ä—Å–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö –º–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–æ–≥–æ —Ä—ã–Ω–∫–∞

–°–∏—Å—Ç–µ–º–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥–∞–Ω–Ω—ã—Ö —Å —Å–∞–π—Ç–∞ 23met.ru –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –º–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–æ–≥–æ —Ä—ã–Ω–∫–∞.

## üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥** –¥–∞–Ω–Ω—ã—Ö —Å —Å–∞–π—Ç–∞ 23met.ru
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ HTML** —Å—Ç—Ä–∞–Ω–∏—Ü –∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è** –¥–∞–Ω–Ω—ã—Ö
- **–≠–∫—Å–ø–æ—Ä—Ç –≤ CSV** —Ñ–æ—Ä–º–∞—Ç
- **–ê–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö** –ø–æ —Ä–∞–∑–º–µ—Ä–∞–º –∏ —Ç–∏–ø–∞–º
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –ø—Ä–æ—Ü–µ—Å—Å–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.8+
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ requirements.txt

## üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt

# –ò–ª–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
pip install -r requirements-dev.txt
```

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –û—Å–Ω–æ–≤–Ω–æ–π –ø–∞—Ä—Å–µ—Ä
```bash
# –ó–∞–ø—É—Å–∫ –ø–∞—Ä—Å–∏–Ω–≥–∞
python main.py

# –ü–∞—Ä—Å–∏–Ω–≥ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
python parser_23MET.py

# –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
python preProcessor.py
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `config.json`:
```json
{
  "base_url": "https://site23met.ru",
  "output_dir": "results",
  "filters": {
    "min_price": 1000,
    "max_price": 100000
  }
}
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
parser/
‚îú‚îÄ‚îÄ 23MET_DATA/            # –î–∞–Ω–Ω—ã–µ –ø–∞—Ä—Å–∏–Ω–≥–∞
‚îÇ   ‚îú‚îÄ‚îÄ *.html            # HTML —Å—Ç—Ä–∞–Ω–∏—Ü—ã
‚îÇ   ‚îú‚îÄ‚îÄ result.csv        # –†–µ–∑—É–ª—å—Ç–∞—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ aggregated_*.csv  # –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îú‚îÄ‚îÄ results/              # –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏
‚îú‚îÄ‚îÄ GoogleHTML/           # –î–∞–Ω–Ω—ã–µ –∏–∑ Google
‚îú‚îÄ‚îÄ main.py              # –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç
‚îú‚îÄ‚îÄ parser_23MET.py      # –ü–∞—Ä—Å–µ—Ä 23met.ru
‚îú‚îÄ‚îÄ preProcessor.py      # –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ GoogleParser.py      # –ü–∞—Ä—Å–µ—Ä Google
‚îú‚îÄ‚îÄ proxyParser.py       # –ü–∞—Ä—Å–µ—Ä —Å –ø—Ä–æ–∫—Å–∏
‚îú‚îÄ‚îÄ config.json          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îî‚îÄ‚îÄ requirements.txt     # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```

## üîß –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏
- `main.py` - –ì–ª–∞–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –ø–∞—Ä—Å–∏–Ω–≥–∞
- `parser_23MET.py` - –ü–∞—Ä—Å–µ—Ä —Å–∞–π—Ç–∞ 23met.ru
- `preProcessor.py` - –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- `GoogleParser.py` - –ü–∞—Ä—Å–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö –∏–∑ Google
- `proxyParser.py` - –ü–∞—Ä—Å–∏–Ω–≥ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø—Ä–æ–∫—Å–∏

### –£—Ç–∏–ª–∏—Ç—ã
- `base.py` - –ë–∞–∑–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏
- `update_config.py` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- `example_filtering.py` - –ü—Ä–∏–º–µ—Ä—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

## üìä –§–æ—Ä–º–∞—Ç—ã –¥–∞–Ω–Ω—ã—Ö

### –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- HTML —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å –ø—Ä–∞–π—Å-–ª–∏—Å—Ç–∞–º–∏
- JSON –¥–∞–Ω–Ω—ã–µ –∏–∑ API
- CSV —Ñ–∞–π–ª—ã —Å –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏

### –í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- `result.csv` - –û—Å–Ω–æ–≤–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
- `aggregated_by_size_ranges.csv` - –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- `preprocessing_result.csv` - –û–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ CSV
```csv
–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ,–†–∞–∑–º–µ—Ä,–ì–û–°–¢,–ö–æ–º–ø–∞–Ω–∏—è,–ì–æ—Ä–æ–¥,–¢–∏–ø_–ø—Ä–æ–¥—É–∫—Ü–∏–∏,–¶–µ–Ω–∞,...
–¢—Ä—É–±–∞ –í–ì–ü,15—Ö2.5,–ì–û–°–¢ 3262-75,–ù–æ–≤–æ—Å—Ç–∞–ª—å-–ú–∞—Ä–∫–µ—Ç,–ú–æ—Å–∫–≤–∞,–ì–∞–±–∞—Ä–∏—Ç,60690.0,...
```

## üîç –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

### –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã
- –ü–æ —Ç–∏–ø—É –ø—Ä–æ–¥—É–∫—Ü–∏–∏
- –ü–æ —Ä–∞–∑–º–µ—Ä—É/–¥–∏–∞–º–µ—Ç—Ä—É
- –ü–æ –ì–û–°–¢ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—É
- –ü–æ –º–∞—Ä–∫–µ —Å—Ç–∞–ª–∏
- –ü–æ —Ü–µ–Ω–æ–≤–æ–º—É –¥–∏–∞–ø–∞–∑–æ–Ω—É
- –ü–æ —Ä–µ–≥–∏–æ–Ω—É/–≥–æ—Ä–æ–¥—É

### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
```python
from preProcessor import DataProcessor

processor = DataProcessor()
filtered_data = processor.filter_by_size_range(
    data, min_size=10, max_size=100
)
```

## üìà –ê–Ω–∞–ª–∏—Ç–∏–∫–∞

### –ê–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —Ä–∞–∑–º–µ—Ä–∞–º
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ü–µ–Ω–∞–º
- –ê–Ω–∞–ª–∏–∑ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤
- –¢—Ä–µ–Ω–¥—ã —Ä—ã–Ω–∫–∞

### –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
- –ì—Ä–∞—Ñ–∏–∫–∏ —Ü–µ–Ω
- –î–∏–∞–≥—Ä–∞–º–º—ã —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
- –ö–∞—Ä—Ç—ã —Ä–µ–≥–∏–æ–Ω–æ–≤

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **Rate limiting** –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫
- **User-Agent** —Ä–æ—Ç–∞—Ü–∏—è
- **–ü—Ä–æ–∫—Å–∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞** –¥–ª—è –æ–±—Ö–æ–¥–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ñ–∞–π–ª `cron.log`:
```
2025-09-22 10:30:00 - INFO - –ù–∞—á–∞–ª–æ –ø–∞—Ä—Å–∏–Ω–≥–∞
2025-09-22 10:30:15 - INFO - –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ 100 –∑–∞–ø–∏—Å–µ–π
2025-09-22 10:30:30 - ERROR - –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–∞–π—Ç—É
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
python -m pytest tests/

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –º–æ–¥—É–ª—è
python test_specific_filter.py
```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [Filtering Guide](FILTERING_GUIDE.md)
- [API Guide](../PARSER_API_GUIDE.md)
- [Data Format](../FRONTEND_DATA_FORMAT.md)

## üöÄ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å API

–ü–∞—Ä—Å–µ—Ä –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å FastAPI backend:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- REST API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞—Ä—Å–∏–Ω–≥–æ–º
- WebSocket –¥–ª—è real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–∫—Å–∏
```python
PROXY_LIST = [
    "http://proxy1:port",
    "http://proxy2:port"
]
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ User-Agent
```python
USER_AGENTS = [
    "Mozilla/5.0 (Windows NT 10.0; Win64; x64)...",
    "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7)..."
]
```

## üêõ Troubleshooting

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
- **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ IP** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–æ–∫—Å–∏
- **–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Å–∞–π—Ç–∞** - –æ–±–Ω–æ–≤–∏—Ç–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã
- **–ú–µ–¥–ª–µ–Ω–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥** - –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –∑–∞–¥–µ—Ä–∂–∫–∏

### –û—Ç–ª–∞–¥–∫–∞
```bash
# –í–∫–ª—é—á–µ–Ω–∏–µ debug —Ä–µ–∂–∏–º–∞
export DEBUG=1
python main.py

# –ü–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏
python main.py --verbose
```

---

**Parser** - –ù–∞–¥–µ–∂–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥–∞–Ω–Ω—ã—Ö –º–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–æ–≥–æ —Ä—ã–Ω–∫–∞ üîç